---
template: main.html
title: Advanced Options
---

# Advanced Options

The default values for the various parameters as well as the inclusion of some variables over others in the general
MMPBSA.py input file were chosen to cover the majority of all MM/PB(GB)SA calculations that would be attempted while
maintaining maximum simplicity. However, there are situations in which MMPBSA.py may appear to be restrictive and
ill-equipped to address. Attempts were made to maintain the simplicity described above while easily providing users with
the ability to modify most aspects of the calculation easily and without editing the source code.

`-make-mdins`
:   This flag will create all of the mdin and input files used by `sander` and `nmode` so that additional control
    can be granted to the user beyond the variables detailed in the input file section above. The files created are 
    _GMXMMPBSA_gb.mdin which controls GB calculation; _GMXMMPBSA_pb.mdin which controls the PB calculation; 
    _GMXMMPBSA_sander_nm_min.mdin which controls the sander minimization of snapshots to be prepared for `nmode` 
    calculations; and _GMXMMPBSA_nmode.in which controls the nmode calculation. If no input file is specified, all 
    files above are created with default values, and _GMXMMPBSA_pb.mdin is created for AmberTools’s pbsa. If you 
    wish to create a file for `sander.APBS`, you must include an input file with `sander_apbs=1` specified to generate 
    the desired input file. Note that if an input file is specified, only those mdin files pertinent to the 
    calculation described therein will be created!

`-use-mdins`
:   This flag will prevent MMPBSA.py from creating the input files that control the various calculations 
    (_GMXMMPBSA_gb.mdin, _GMXMMPBSA_pb.mdin, _GMXMMPBSA_sander_nm_min.mdin, and _GMXMMPBSA_nmode.in). It will instead
    attempt to use existing input files (though they must have those names above!) in their place. In this way, the 
    user has full control over the calculations performed, however care must be taken. The mdin files created by 
    MMPBSA.py have been tested and are (generally) known to be consistent. Modifying certain variables (such as `imin=5`)
    may prevent the script from working, so this should only be done with care. It is recommended that users start 
    with the existing mdin files (generated by the `-make-mdins` flag above), and add and/or modify parameters from 
    there.

!!! note
    `-make-mdins` and `-use-mdins` are intended to give added flexibility to user input. If the MM/PBSA input file 
    does not expose a variable you require, you may use the -make-mdins flag to generate the MDIN files and then 
    quit. Then, edit those MDIN files, changing the variables you need to, then running `gmx_MMPBSA` with -use-mdins 
    to use those modified files.

`QM/MMGBSA` 
:   There are a lot of options for QM/MM calculations in sander, but not all of those options were made available 
    via options in the MMPBSA.py input file. In order to take advantage of these other options, you’ll have to make 
    use of the -make-mdins and -use-mdins flags as detailed above and change the resulting 
    _GMXMMPBSA_gb_qmmm_com/rec/lig.mdin files to fit your desired calculation. Additionally, MMPBSA.py suffers all 
    shortcomings of sander, one of those being that PB and QM/MM are incompatible. Therefore, only QM/MMGBSA is a valid
    option right now.